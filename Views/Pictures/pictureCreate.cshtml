@model Modells.Models.picture

@{
    ViewBag.Title = "pictureCreate";
    Layout = "~/Views/Shared/_Layout.cshtml";


}

<script>
    function integratePicureName() {

        // Get the picture entire source name from the upload :
        var pictureFileEntireName = $('input[type=file]').val();

        // Get the short name of the uploaded picture by removing prefixes "C:\fakepath" or "C:\fake_path" :
        var pictureFileShortName = pictureFileEntireName.split('\\').pop(); //

        $(".pictureStandardUrl").val(pictureFileShortName);

        // Check if variable is correct :
        console.log(pictureFileShortName);
    }
</script>

@using (Html.BeginForm("PictureCreate", "Pictures", FormMethod.Post, new { enctype = "multipart/form-data" }))
{
    @Html.AntiForgeryToken()
        <form class="form-horizontal form-control" novalidate>
            @Html.ValidationSummary(true, "", new { @class = "text-danger" })
            <fieldset class="border border-info ml-2 p-2 left">
                <div class="form-group col-md-8 d-flex mx-auto justify-content-center">
                    @*@Html.LabelFor(model => model.pictureStandardUrl, "Upload ", new { @class = "control-label btn btn-primary col-md-0" })*@
                    <label for="newPictureToUpload" class="control-label btn btn-primary col-md-3"><i class="far fa-image"></i></label>
                    <input type="file" class="form-control" name="newPictureToUpload" id="newPictureToUpload" onchange=integratePicureName() />
                    @Html.EditorFor(model => model.pictureStandardUrl, new { htmlAttributes = new { @class = "form-control col-md-5 pictureStandardUrl", @placeholder = "Image.jpg" } })
                    @Html.ValidationMessageFor(model => model.pictureStandardUrl, "", new { @class = "text-danger" })
                </div>
                <div class="form-group col-md-8 d-flex mx-auto justify-content-center">
                    @Html.LabelFor(model => model.pictureTitle, new { @class = "control-label btn btn-primary col-md-3" })
                    @Html.EditorFor(model => model.pictureTitle, new { htmlAttributes = new { @class = "form-control col-md-5", @placeholder = "titre de l'image" } })
                    @Html.ValidationMessageFor(model => model.pictureTitle, "", new { @class = "text-danger" })
                </div>
                <div class="form-group col-md-8 d-flex mx-auto justify-content-center">
                    @Html.LabelFor(model => model.pictureAlternateTitle, new { @class = "control-label btn btn-primary col-md-3" })
                    @Html.EditorFor(model => model.pictureAlternateTitle, new { htmlAttributes = new { @class = "form-control col-md-5", @placeholder = "titre alternatif de l'image" } })
                    @Html.ValidationMessageFor(model => model.pictureAlternateTitle, "", new { @class = "text-danger" })
                </div>
                <div class="form-group col-md-8 d-flex mx-auto justify-content-center">
                    @Html.LabelFor(model => model.pictureDescription, new { @class = "control-label btn btn-primary col-md-3" })
                    @Html.TextAreaFor(model => model.pictureDescription, new { @class = "form-control col-md-5", @placeholder = "descriptif de l'image" })
                    @Html.ValidationMessageFor(model => model.pictureDescription, "", new { @class = "text-danger" })
                </div>
                <div class="form-group col-md-8 d-flex mx-auto justify-content-center">
                    @Html.LabelFor(model => model.categoryId, "Catégorie", new { @class = "control-label btn btn-primary col-md-3" })
                    @Html.DropDownList("categoryId", null, new { @class = "form-control col-md-5" })
                    @Html.ValidationMessageFor(model => model.categoryId, "", new { @class = "text-danger" })
                </div>
                <div class="form-group col-md-8 d-flex mx-auto justify-content-center">
                    <button class="btn btn-primary col-md-3 text-light">@Html.ActionLink("Retour", "Index2")</button>
                    <button type="submit" value="pictureCreate" class="btn btn-primary col-md-5"><i class="fas fa-plus"></i></button>
                </div>
            </fieldset>
        </form>
        }
